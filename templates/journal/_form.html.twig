{# Le contenu va dans le block body qui sera inséré dans main-content #}
{% block body %}
  <div class="journal-container">
    
    {# Widget de date centré #}
    <div class="date-widget-center">   
      {{ form_widget(form.date) }} 
    </div>
    
    <div class="tables-container">
      
      {# --- TABLE DES ENTRÉES EXISTANTES SAUVEGARDÉES --- #}
      <div class="table-section">
        <h3>Entrées existantes</h3>
        <table class="old-entries">     
          <thead>         
            <tr>             
              <th>Heure</th>             
              <th>Action</th>             
              <th>Description</th>             
              <th>Note</th>         
            </tr>     
          </thead>     
          <tbody>         
            {% set savedEntries = [] %}
            {% for entry in journal.entries %}
              {% if entry.id is not null %}
                {% set savedEntries = savedEntries|merge([entry]) %}
              {% endif %}
            {% endfor %}
            
            {% for entry in savedEntries %}             
              <tr>                 
                <td>{{ entry.heure ? entry.heure|date('H:i') : '' }}</td>                 
                <td>{{ entry.action }}</td>                 
                <td>{{ entry.description }}</td>                 
                <td>{{ entry.note }}</td>             
              </tr>         
            {% else %}             
              <tr>                 
                <td colspan="4">Aucune entrée pour ce journal.</td>             
              </tr>         
            {% endfor %}     
          </tbody> 
        </table>
      </div>
      
      {# --- FORMULAIRE POUR AJOUTER UNE NOUVELLE ENTRÉE --- #}
      <div class="form-section">
        <h3>Ajouter une entrée</h3>
        {{ form_start(form) }} 
        <table id="tableJournalEntry">     
          <thead>         
            <tr>             
              <th>Heure</th>             
              <th>Action</th>             
              <th>Description</th>             
              <th>Note</th>         
            </tr>     
          </thead>     
          <tbody>
            {% for entryForm in form.entries %}             
              <tr class="journal-entry-row">                 
                <td>{{ form_widget(entryForm.heure) }}</td>                 
                <td>{{ form_widget(entryForm.action) }}</td>                 
                <td>{{ form_widget(entryForm.description) }}</td>                 
                <td>{{ form_widget(entryForm.note) }}</td>             
              </tr>         
            {% endfor %}     
          </tbody> 
        </table>  
        
        <div id="buttons"> 
          <button type="submit" class="submitEntryJournal">Enregistrer</button> 
        </div>  
        
        {{ form_end(form) }}
      </div>
      
    </div>
  </div>
{% endblock %}